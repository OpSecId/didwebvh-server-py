{% macro render_pagination(pagination, request) %}
{% if pagination %}
<div class="card-footer d-flex align-items-center">
    <p class="m-0 text-secondary">
        Showing <span>{{ ((pagination.page - 1) * pagination.limit) + 1 }}</span>
        to <span>{{ [pagination.page * pagination.limit, pagination.total]|min }}</span> 
        of <span>{{ pagination.total }}</span> entries
    </p>
    <ul class="pagination m-0 ms-auto">
        {% if pagination.has_prev %}
        <li class="page-item">
            <a class="page-link pagination-link" href="#" data-page="{{ pagination.prev_page }}">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M15 6l-6 6l6 6" />
                </svg>
                prev
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" tabindex="-1">prev</a>
        </li>
        {% endif %}

        {% set start_page = [1, pagination.page - 2]|max %}
        {% set end_page = [pagination.total_pages, pagination.page + 2]|min %}

        {% if start_page > 1 %}
        <li class="page-item"><a class="page-link pagination-link" href="#" data-page="1">1</a></li>
        {% if start_page > 2 %}
        <li class="page-item disabled"><span class="page-link">...</span></li>
        {% endif %}
        {% endif %}

        {% for p in range(start_page, end_page + 1) %}
        <li class="page-item {% if p == pagination.page %}active{% endif %}">
            <a class="page-link pagination-link" href="#" data-page="{{ p }}">{{ p }}</a>
        </li>
        {% endfor %}

        {% if end_page < pagination.total_pages %}
        {% if end_page < pagination.total_pages - 1 %}
        <li class="page-item disabled"><span class="page-link">...</span></li>
        {% endif %}
        <li class="page-item"><a class="page-link pagination-link" href="#" data-page="{{ pagination.total_pages }}">{{ pagination.total_pages }}</a></li>
        {% endif %}

        {% if pagination.has_next %}
        <li class="page-item">
            <a class="page-link pagination-link" href="#" data-page="{{ pagination.next_page }}">
                next
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M9 6l6 6l-6 6" />
                </svg>
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" tabindex="-1">next</a>
        </li>
        {% endif %}
    </ul>
</div>
{% endif %}
{% endmacro %}

